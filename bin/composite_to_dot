#!/usr/bin/env ruby

require 'json'
require 'pp'
require 'byebug'
require 'nokogiri'
# require 'slim'
require 'erb'
require 'digest/sha1'

require_relative "lib/common"
include Repository

HELP = <<EOF

Transform the event/trigger structure of a composite knowledge artifact into a visual representation using DOT syntax. Rendering may be done using `graphviz` or any number of existing tools.

	USAGE: #{__FILE__} <composite.xml>

	EXAMPLE:
		#{__FILE__} my_composite_knart.xml |dot -Tsvg -o graph.svg

EOF


if(ARGV.length != 1)
	puts HELP
	exit 1
else
	path = File.expand_path(ARGV[0])
	doc = Nokogiri::XML(File.open(path))
	puts generate_dot(doc)
	exit 0
end
